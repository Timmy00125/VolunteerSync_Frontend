<div class="max-w-7xl mx-auto p-5">
  @if (isLoading()) {
    <div class="flex flex-col items-center justify-center p-10 text-center">
      <mat-spinner class="mb-4"></mat-spinner>
      <p class="text-gray-600">Loading profile...</p>
    </div>
  } @else if (error()) {
    <div class="flex flex-col items-center justify-center p-10 text-center">
      <mat-icon color="warn" class="text-5xl w-12 h-12 mb-4">error</mat-icon>
      <h2 class="text-xl font-medium mb-2 text-gray-900">Unable to Load Profile</h2>
      <p class="text-red-600 mb-4 max-w-md">{{ error() }}</p>
      @if (error()?.includes("Network connection failed") || error()?.includes("Network error")) {
        <p class="text-gray-600 mb-4 text-sm max-w-md">
          This usually happens when the server is not running or there are connectivity issues.
          Please ensure you are connected to the internet and the server is running.
        </p>
        <button mat-raised-button color="primary" (click)="loadProfile()">Retry</button>
      } @else if (error()?.includes("Authentication")) {
        <p class="text-gray-600 mb-4 text-sm max-w-md">
          Your session may have expired. Please try logging in again.
        </p>
        <button mat-raised-button color="primary" (click)="goToLogin()">
          Go to Login
        </button>
      } @else {
        <button mat-raised-button color="primary" (click)="loadProfile()">Retry</button>
      }
    </div>
  } @else if (profile()) {
    <mat-card class="mb-6">
      <mat-card-header>
        <mat-card-title>Profile</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <h1 class="text-2xl font-medium mb-2">{{ displayName() }}</h1>
        <p class="text-gray-600 mb-4">{{ userEmail() }}</p>
        @if (profile()?.bio) {
          <p class="text-base leading-relaxed">{{ profile()?.bio }}</p>
        }
      </mat-card-content>
    </mat-card>
  } @else {
    <div class="flex flex-col items-center justify-center p-10 text-center">
      <mat-icon class="text-6xl text-gray-400 mb-4">person</mat-icon>
      <h2 class="text-2xl font-medium text-gray-600 mb-4">Profile not found</h2>
      <button mat-raised-button color="primary" [routerLink]="['/dashboard']">
        Back to Dashboard
      </button>
    </div>
  }
</div>
